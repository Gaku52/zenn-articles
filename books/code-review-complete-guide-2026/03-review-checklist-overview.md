---
title: "第3章 レビューチェックリスト概要"
---

# 第3章 レビューチェックリスト概要

本章では、コードレビューで確認すべき項目を体系的に整理したチェックリストを提供します。このチェックリストは、レビュー時の見逃しを防ぎ、一貫した品質基準を維持するために活用できます。

## チェックリストの使い方

### レビュー時の活用

チェックリストは、レビューの網羅性を確保するためのツールです。全ての項目を機械的にチェックするのではなく、PRの性質に応じて重点を置く項目を選択してください。

```typescript
// チェックリストの優先順位付け
interface ReviewChecklist {
  critical: CheckItem[];  // 必ず確認
  high: CheckItem[];      // 重要度が高い
  medium: CheckItem[];    // 余裕があれば確認
  low: CheckItem[];       // 必要に応じて確認
}

interface CheckItem {
  id: string;
  description: string;
  applicable: (pr: PullRequest) => boolean;
  automatable: boolean;
}
```

### PRタイプ別の重点項目

```typescript
const reviewFocus = {
  newFeature: {
    critical: ['機能性', 'セキュリティ', 'テスト'],
    high: ['設計', 'パフォーマンス'],
    medium: ['可読性', 'ドキュメント'],
  },
  bugFix: {
    critical: ['機能性', 'テスト'],
    high: ['根本原因の特定'],
    medium: ['再発防止策'],
  },
  refactoring: {
    critical: ['機能性（同一性）', 'テスト'],
    high: ['可読性', '保守性'],
    medium: ['パフォーマンス'],
  },
};
```

## 総合チェックリスト

### 機能性チェックリスト

```markdown
## 機能性レビュー項目

### 要件充足
- [ ] 全ての要件を満たしているか
- [ ] 受け入れ基準を満たしているか
- [ ] ユーザーストーリーに沿っているか
- [ ] 設計書/仕様書と一致しているか

### エッジケース
- [ ] 空データ/null/undefined の処理
- [ ] 大量データの処理
- [ ] 境界値の処理（最小値、最大値）
- [ ] 不正な入力の処理
- [ ] タイムアウト/ネットワークエラーの処理

### エラーハンドリング
- [ ] 全てのエラーケースを処理しているか
- [ ] エラーメッセージが明確か
- [ ] エラーログが適切に記録されるか
- [ ] ユーザーにわかりやすいエラー表示か
- [ ] リカバリー処理が実装されているか

### データ整合性
- [ ] データバリデーションが実装されているか
- [ ] データの一貫性が保たれるか
- [ ] トランザクション処理が適切か
- [ ] ロールバック処理が実装されているか
```

### コード品質チェックリスト

```markdown
## コード品質レビュー項目

### 可読性
- [ ] 変数名が明確で意味が分かるか
- [ ] 関数名が動作を表しているか
- [ ] クラス名が責務を表しているか
- [ ] マジックナンバーを避けているか
- [ ] ネストが深すぎないか（4階層以下）
- [ ] 1行が長すぎないか（80-120文字）

### 関数設計
- [ ] 関数が単一責任を持っているか
- [ ] 関数が短い（20-50行程度）か
- [ ] 引数の数が適切か（3個以下推奨）
- [ ] 関数の戻り値が明確か
- [ ] 副作用が最小限か

### クラス設計（SOLID原則）
- [ ] 単一責任原則を守っているか
- [ ] 開放/閉鎖原則を守っているか
- [ ] リスコフの置換原則を守っているか
- [ ] インターフェース分離原則を守っているか
- [ ] 依存性逆転原則を守っているか

### DRY原則
- [ ] 重複コードがないか
- [ ] 共通処理が抽出されているか
- [ ] ユーティリティ関数が適切に使われているか

### コメント
- [ ] Whyを説明するコメントがあるか
- [ ] 複雑なロジックに説明があるか
- [ ] 古いコメントが削除されているか
- [ ] TODOコメントに期限と担当者があるか
```

参考: [Google Engineering Practices - Code Review](https://google.github.io/eng-practices/review/)

### セキュリティチェックリスト

```markdown
## セキュリティレビュー項目（OWASP Top 10準拠）

### インジェクション対策
- [ ] SQLインジェクション対策（パラメータ化クエリ）
- [ ] コマンドインジェクション対策
- [ ] XPath/LDAPインジェクション対策
- [ ] ORMを適切に使っているか

### 認証・認可
- [ ] 認証が適切に実装されているか
- [ ] 認可チェックがあるか
- [ ] セッション管理が適切か
- [ ] パスワードがハッシュ化されているか

### 機密情報の保護
- [ ] 機密情報がハードコードされていないか
- [ ] 環境変数が適切に使われているか
- [ ] ログに機密情報が含まれていないか
- [ ] 暗号化が適切に実装されているか

### XSS対策
- [ ] 出力のエスケープ処理があるか
- [ ] HTMLの動的生成が安全か
- [ ] Content Security Policyが設定されているか

### CSRF対策
- [ ] CSRFトークンが実装されているか
- [ ] Same-Site Cookie属性が設定されているか
```

参考: [OWASP Top Ten](https://owasp.org/www-project-top-ten/)

### パフォーマンスチェックリスト

```markdown
## パフォーマンスレビュー項目

### データベース
- [ ] N+1クエリを避けているか
- [ ] インデックスが適切に設定されているか
- [ ] クエリが最適化されているか
- [ ] コネクションプールを使っているか

### アルゴリズム
- [ ] 適切なデータ構造を使っているか
- [ ] 時間計算量が適切か
- [ ] 空間計算量が適切か
- [ ] 不要なループがないか

### キャッシュ
- [ ] キャッシュ戦略が適切か
- [ ] キャッシュの無効化が適切か
- [ ] メモ化を活用しているか

### フロントエンド
- [ ] 不要な再レンダリングがないか
- [ ] バンドルサイズが適切か
- [ ] 画像が最適化されているか
- [ ] 遅延ロードを活用しているか
```

### テストチェックリスト

```markdown
## テストレビュー項目

### テストカバレッジ
- [ ] 新機能のテストがあるか
- [ ] カバレッジが低下していないか
- [ ] エッジケースのテストがあるか
- [ ] 境界値のテストがあるか

### テスト品質
- [ ] テストが独立しているか
- [ ] テストが決定的か（毎回同じ結果）
- [ ] テスト名が明確か
- [ ] AAA（Arrange-Act-Assert）パターンに従っているか

### テストタイプ
- [ ] ユニットテストがあるか
- [ ] 統合テストが必要か
- [ ] E2Eテストが必要か
```

## チェックリストの自動化

### 自動チェック可能な項目

```typescript
// 自動チェック可能な項目
const automatableChecks = {
  style: {
    tool: 'ESLint, Prettier',
    items: [
      'コードフォーマット',
      'インデント',
      '命名規則',
      '未使用変数',
    ],
  },
  typeCheck: {
    tool: 'TypeScript, mypy',
    items: [
      '型エラー',
      'null安全性',
      '型推論',
    ],
  },
  security: {
    tool: 'npm audit, Snyk',
    items: [
      '既知の脆弱性',
      '依存関係の問題',
    ],
  },
  testing: {
    tool: 'Jest, pytest',
    items: [
      'テストの実行',
      'カバレッジ測定',
    ],
  },
};
```

### 手動レビューが必要な項目

```typescript
// 手動レビューが必要な項目
const manualReviewRequired = {
  logic: [
    'ビジネスロジックの正確性',
    'エッジケースの考慮',
    'エラーハンドリングの適切性',
  ],
  design: [
    'アーキテクチャの一貫性',
    'SOLID原則の遵守',
    '拡張性の考慮',
  ],
  security: [
    'セキュリティ設計の妥当性',
    '認証・認可ロジック',
    'データフロー',
  ],
};
```

## まとめ

本章では、レビュー時に確認すべき項目を体系的に整理しました。

- **機能性**: 要件充足、エッジケース、エラーハンドリング
- **コード品質**: 可読性、SOLID原則、DRY原則
- **セキュリティ**: OWASP Top 10準拠のチェック
- **パフォーマンス**: データベース、アルゴリズム、キャッシュ
- **テスト**: カバレッジ、品質、独立性

次章では、効果的なフィードバック技術について学びます。建設的なコメントの書き方、コミュニケーションのベストプラクティスを習得しましょう。
